<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Tanya Jawa | JavaIsland</title>
    <link rel="stylesheet" href="css/askjava.css" />
    <link class="w-52" rel="icon" href="Images/logo_ji.png">
    <script src="https://cdn.tailwindcss.com"></script>
    <link
      href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&family=Raleway:wght@500;700&display=swap"
      rel="stylesheet"
    />
  </head>
  <body class="bg-yellow-50 overflow-x-hidden">
    <!-- NAVBA -->

    <nav
      class="bg-[#15B392] fixed mt-2 top-4 left-1/2 transform -translate-x-1/2 w-10/12 max-w-screen-lg rounded-full py-4 z-50 shadow-sm"
    >
      <div class="flex justify-evenly items-center px-16">
        <ul id="navbar-left" class="hidden md:flex space-x-20">
        <li>
          <a href="index.html" class="text-white relative garis font-bold">BERANDA</a>
        </li>
        <li>
          <a href="culture.html" class="text-white relative garis font-semibold">BUDAYA</a>
        </li>
      </ul>
      <img class="w-8" src="Images/logo_ji.png">
        <ul id="navbar-right" class="hidden md:flex space-x-20">
          <li>
            <a href="explore.html" class="text-white relative garis font-semibold">JELAJAHI</a>
          </li>
          <li>
            <a href="askjava.html" class="text-[#D2FF72] relative garis font-semibold">TANYA JAWA</a>
          </li>
        </ul>
        <div class="md:hidden">
          <button id="hamburger-btn" class="text-white focus:outline-none">
            <svg src="images/burger-icon.svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
            </svg>
          </button>
        </div>
      </div>
      <div id="dropdown-menu" class="hidden absolute top-full right-0 bg-[#15B392] shadow-lg rounded-lg">
        <ul class="flex flex-col space-y-3 px-5 py-2 text-right">
          <li><a href="index.html" class="text-white font-bold">BERANDA</a></li>
          <li><a href="culture.html" class="text-white font-semibold">BUDAYA</a></li>
          <li><a href="explore.html" class="text-white font-semibold">JELAJAHI</a></li>
          <li><a href="askjava.html" class="text-[#D2FF72] font-semibold">TANYA JAWA</a></li>
        </ul>
      </div>
    </nav>

    <!-- AI -->

    <section class="my-52 relative">
      <img
        class="absolute bottom-[31rem] max-[767px]:hidden lg:-left-14 md:left-4 w-32 z-20 fadeinright"
        src="Images/awan.png"
      />
      <img
        class="absolute bottom-[31rem] max-[767px]:hidden lg:-right-14 md:right-4 w-32 z-20 fadeinleft"
        src="Images/awan.png"
      />
      <div
        class="chatBot border-4 border-solid border-[#15B392] shadow-2xl lg:w-[800px] md:w-[600px] max-[767px]:w-[400px] h-auto rounded-xl items-center justify-center mx-auto bg-white list-none fadeindown"
      >
        <header class="bg-[#15B392] text-center py-3 rounded-t-lg">
          <h2 class="text-xl text-white font-semibold">AI JavaIsland</h2>
        </header>
        <ul class="chatbox h-[450px] overflow-y-auto">
          <li
            class="chat-incoming chat items-center justify-center mx-auto h-8 w-80 rounded-3xl mt-4 mb-10"
          >
            <h2 class="text-center py-1">Hai! Ada yang bisa saya bantu hari ini?</h2>
          </li>
        </ul>
        <div
          class="flex chat-input bg-[#15B392] w-full h-20 rounded-b-lg py-5 px-6"
        >
          <textarea
            class="w-[90%] rounded-l-full px-6 py-2 border border-gray-300"
            rows="0"
            cols="17"
            placeholder="Apa Yang Ingin Ditanyakan?"
          ></textarea>
          <button
            class="w-[10%] bg-[#D2FF72] rounded-r-full hover:bg-[#a8e300] hover:shadow-xl transition duration-300"
            id="sendBTN"
          >
            Kirim
          </button>
        </div>
      </div>
    </section>

    <!-- KONTAK -->

    <section class="text-gray-600 body-font relative">
      <div
        class="container px-5 mb-52 mx-auto flex sm:flex-nowrap flex-wrap fadeinrightup"
      >
        <div
          class="lg:w-2/3 md:w-1/2 bg-gray-300 rounded-lg overflow-hidden sm:mr-10 p-10 flex items-end justify-start relative"
        >
          <iframe
            width="100%"
            height="100%"
            class="absolute inset-0"
            frameborder="0"
            title="map"
            marginheight="0"
            marginwidth="0"
            scrolling="no"
            src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d4052272.254078778!2d107.26587790177713!3d-7.320483578793414!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x2e7aa07ed2323237%3A0x86fe1c59d6abed60!2sPulau%20Jawa!5e0!3m2!1sid!2sid!4v1729302397793!5m2!1sid!2sid"
            style="filter: grayscale(1) contrast(1.2) opacity(0.4)"
          ></iframe>
          <div
            class="bg-[#15B392] relative flex flex-wrap py-6 rounded shadow-md"
          >
            <div class="lg:w-1/2 px-6">
              <h2
                class="title-font font-semibold text-white tracking-widest text-xs"
              >
                ALAMAT
              </h2>
              <p class="mt-1 text-gray-200">
                Lorem ipsum dolor sit amet consectetur adipisicing elit. Totam,
                consectetur?
              </p>
            </div>
            <div class="lg:w-1/2 px-6 mt-4 lg:mt-0">
              <h2
                class="title-font font-semibold text-white tracking-widest text-xs"
              >
                EMAIL
              </h2>
              <a class="text-[#D2FF72] leading-relaxed">javaisland@email.com</a>
              <h2
                class="title-font font-semibold text-white tracking-widest text-xs mt-4"
              >
                NOMOR
              </h2>
              <p class="leading-relaxed text-gray-200">123-456-7890</p>
            </div>
          </div>
        </div>
        <div
          class="lg:w-1/3 md:w-1/2 bg-white rounded-lg px-10 flex flex-col md:ml-auto w-full md:py-8 mt-8 md:mt-0 border-2 border-solid border-[#15B392] fadeinleftup"
        >
          <h2 class="text-gray-900 text-lg mb-1 font-medium title-font">
          Sampaikan Umpan Balik
          </h2>
          <p class="leading-relaxed mb-5 text-gray-600">
            Berikan saran apapun tentang platform ini.
          </p>
          <div class="relative mb-4">
            <label for="name" class="leading-7 text-sm text-gray-600"
              >Nama</label
            >
            <input
              type="text"
              id="name"
              name="name"
              class="w-full bg-white rounded border border-gray-300 focus:ring-2 focus:ring-indigo-200 text-base outline-none text-gray-700 py-1 px-3 leading-8 transition-colors duration-200 ease-in-out"
            />
          </div>
          <div class="relative mb-4">
            <label for="email" class="leading-7 text-sm text-gray-600"
              >Email</label
            >
            <input
              type="email"
              id="email"
              name="email"
              class="w-full bg-white rounded border border-gray-300 focus:ring-2 focus:ring-indigo-200 text-base outline-none text-gray-700 py-1 px-3 leading-8 transition-colors duration-200 ease-in-out"
            />
          </div>
          <div class="relative mb-4">
            <label for="message" class="leading-7 text-sm text-gray-600"
              >Pesan</label
            >
            <textarea
              id="message"
              name="message"
              class="w-full bg-white rounded border border-gray-300 focus:ring-2 focus:ring-indigo-200 h-32 text-base outline-none text-gray-700 py-1 px-3 resize-none leading-6 transition-colors duration-200 ease-in-out"
            ></textarea>
          </div>
          <button
            class="text-white bg-[#15B392] border-0 py-2 px-6 focus:outline-none hover:bg-[#30937e] hover:shadow-lg duration-500 rounded text-lg"
          >
            Kirim
          </button>
        </div>
      </div>
    </section>

    <!-- FOOTER -->

    <footer class="w-full bg-[#15B392]">
      <div class="container px-6 py-8 mx-auto">
        <div class="flex flex-col items-center text-center">
          <a href="#">
            <img class="w-8" src="Images/logo_ji.png">
          </a>

          <p class="max-w-md mx-auto mt-4 text-white fadeinup">
            Pulau Terbesar ke-13 di Dunia.
          </p>

          <div
            class="flex flex-col mt-4 sm:flex-row sm:items-center sm:justify-center fadeinup"
          >
            <a href="explore.html">
              <button
                class="flex items-center justify-center order-1 w-full px-2 py-2 mt-3 text-sm tracking-wide text-white capitalize transition-colors duration-300 transform border rounded-md sm:mx-2 sm:mt-0 sm:w-auto hover:bg-white hover:text-[#15B392] focus:outline-none focus:ring focus:ring-gray-300 focus:ring-opacity-40"
              >
                <span href="explore.html" class="mx-1">Ayo Berkunjung</span>
              </button>
            </a>
            <a href="index.html">
              <button
                class="flex items-center justify-center order-1 w-full px-2 py-2 mt-3 text-sm tracking-wide text-white capitalize transition-colors duration-300 transform border rounded-md sm:mx-2 sm:mt-0 sm:w-auto hover:bg-white hover:text-[#15B392] focus:outline-none focus:ring focus:ring-gray-300 focus:ring-opacity-40"
              >
                <span href="index.html" class="mx-1">Baca Selengkapnya</span>
              </button>
            </a>
          </div>
        </div>

        <hr class="my-10 border-gray-200" />

        <div
          class="flex flex-col items-center sm:flex-row sm:justify-between fadeinup"
        >
          <p class="text-sm text-white">
            © JavaIsland 2024. Hak Cipta Di Lindungi Undang-Undang.
          </p>

          <div class="flex mt-3 -mx-2 sm:mt-0">
            <a
              href="index.html"
              class="mx-2 text-sm text-white transition-colors duration-300 hover:text-white dark:hover:text-gray-300"
              aria-label="Reddit"
            >
              Beranda
            </a>

            <a
              href="culture.html"
              class="mx-2 text-sm text-white transition-colors duration-300 hover:text-white dark:hover:text-gray-300"
              aria-label="Reddit"
            >
              Budaya
            </a>

            <a
              href="explore.html"
              class="mx-2 text-sm text-white transition-colors duration-300 hover:text-white dark:hover:text-gray-300"
              aria-label="Reddit"
            >
              Jelajahi
            </a>
          </div>
        </div>
      </div>
    </footer>

    <script>
      const hamburgerBtn = document.getElementById('hamburger-btn');
      const dropdownMenu = document.getElementById('dropdown-menu');
  
      // Open/Close dropdown menu when hamburger is clicked
      hamburgerBtn.addEventListener('click', () => {
        dropdownMenu.classList.toggle('hidden');
      });
  
      // Optional: Close dropdown when clicking outside
      document.addEventListener('click', function (event) {
        if (!dropdownMenu.contains(event.target) && !hamburgerBtn.contains(event.target)) {
          dropdownMenu.classList.add('hidden');
        }
      });
    </script>
    <script>
      const chatInput = document.querySelector(".chat-input textarea");
const sendChatBtn = document.querySelector(".chat-input button");
const chatbox = document.querySelector(".chatbox");

let userMessage;
const API_KEY = "AIzaSyCuwiQEUm3fSu3sVXpwbeB4_nHmwS104_s";

const allowedKeywords = ["Jawa", "budaya", "candi", "pantai", "gunung", "keraton", "air terjun", "kawah", "wisata", "desa", "kuliner", "bahasa",
                        "java", "culture", "temple", "beach", "mountain", "palace", "waterfall", "crater", "tourism", "village", "culinary", "language"];

const createChatLi = (message, className) => {
  const chatLi = document.createElement("li");
  chatLi.classList.add("chat", className);
  let chatContent =
    className === "chat-outgoing"
      ? `<p>${message}</p>`
      : `<p>${message}</p>`;
  chatLi.innerHTML = chatContent;
  return chatLi;
};

const isKeywordAllowed = (message) => {
  return allowedKeywords.some(keyword => message.toLowerCase().includes(keyword.toLowerCase()));
};

const generateResponse = (incomingChatLi) => {
  const API_URL =
    "https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash-latest:generateContent?key=" + API_KEY;
  const messageElement = incomingChatLi.querySelector("p");

  const requestOptions = {
    method: "POST",
    headers: {
      "Content-Type": "application/json",
    },
    body: JSON.stringify({
      contents: [{ parts: [{ text: userMessage }] }],
    }),
  };

  fetch(API_URL, requestOptions)
    .then((res) => {
      if (!res.ok) {
        throw new Error("Network response was not ok");
      }
      return res.json();
    })
    .then((data) => {
      console.log(data);
      if (data.candidates[0].length > 0) {
        messageElement.textContent = data.choices[0].message.content;
      } else {
        messageElement.classList.add("unclear");
        messageElement.textContent = data.candidates[0].content.parts[0].text;
      }
    })
    .catch((error) => {
      messageElement.classList.add("error");
      messageElement.textContent =
        "Oops! Something went wrong. Please try again later.";
      console.error("Error generating response:", error);
    })
    .finally(() => chatbox.scrollTo(0, chatbox.scrollHeight));
};

chatInput.addEventListener("keydown", (e) => {
  if (e.key === "Enter") {
    handleChat();
    chatInput.value = "";
  }
});

const handleChat = () => {
  userMessage = chatInput.value.trim();
  if (!userMessage) {
    return;
  }

  if (!isKeywordAllowed(userMessage)) {
    chatbox.appendChild(createChatLi("Mohon maaf kami tidak bersedia untuk menjawab hal tersebut. Mohon bertanya tentang Jawa.", "chat-incoming"));
    chatbox.scrollTo(0, chatbox.scrollHeight);
    return;
  }

  chatbox.appendChild(createChatLi(userMessage, "chat-outgoing"));
  chatbox.scrollTo(0, chatbox.scrollHeight);

  setTimeout(() => {
    const incomingChatLi = createChatLi("Thinking...", "chat-incoming");
    chatbox.appendChild(incomingChatLi);
    chatbox.scrollTo(0, chatbox.scrollHeight);
    generateResponse(incomingChatLi);
  }, 600);
};

sendChatBtn.addEventListener("click", handleChat);

function cancel() {
  let chatbotcomplete = document.querySelector(".chatBot");
  if (chatbotcomplete.style.display != "none") {
    chatbotcomplete.style.display = "none";
    let lastMsg = document.createElement("p");
    lastMsg.textContent = "Thanks for using our Chatbot!";
    lastMsg.classList.add("lastMessage");
    document.body.appendChild(lastMsg);
  }
}

    </script>
  </body>
</html>
